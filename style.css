/* Main stylesheet for Football Spinner
   - Dark theme, responsive grid cards, chip UI, wheel, modal
   - Includes clean details/summary (accordion) styling for the SEO section (#content)
   - Inter font is loaded via <link> in index.html (no @import here for better performance)
*/

/* =========================
   Theme variables
   ========================= */
:root {
  color-scheme: dark;

  /* Base palette */
  --bg-0: #05070f;
  --bg-1: #08101e;
  --bg-2: #0e1526;

  --card-0: #0b1429;
  --card-1: #0a162e;

  --line: rgba(120,160,255,.16);
  --line-2: rgba(120,160,255,.10);

  --accent: #64a8ff;  /* main blue */
  --accent-2: #22d3ee; /* cyan */
  --accent-3: #0ea5e9; /* sky */

  --ok: #22c55e;
  --warn: #f59e0b;

  --text-0: #eaf1ff;
  --text-1: #c6d1ea;
  --text-dim: #98a4c4;

  --radius: 14px;
  --shadow-1: 0 6px 26px rgba(2,12,38,.25);

  --ease: cubic-bezier(.24,.8,.24,1);
  --ease-out: cubic-bezier(.16,.84,.44,1);

  /* Gradients */
  --grad-card: linear-gradient(180deg, rgba(28,44,90,.36), rgba(8,16,32,.55));
  --grad-chip: linear-gradient(180deg, rgba(18,28,58,.8), rgba(8,14,26,.9));
}

/* Page background */
html, body {
  margin: 0;
  padding: 0;
  background:
    radial-gradient(1200px 800px at 80% -120px, rgba(28,60,120,.33), transparent 60%),
    radial-gradient(900px 600px at -10% 110%, rgba(30,100,180,.2), transparent 55%),
    linear-gradient(180deg, var(--bg-0), var(--bg-1) 28%, var(--bg-1) 100%);
  color: var(--text-1);
  font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
  line-height: 1.45;
}

/* =========================
   Header
   ========================= */
header {
  padding: 16px clamp(16px,3vw,36px);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 24px;
  position: sticky;
  top: 0;
  background: linear-gradient(180deg, rgba(12,18,31,.78), rgba(10,16,28,.62));
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(120,160,255,.14);
  z-index: 20;
}

header h1 {
  margin: 0;
  font-size: clamp(22px, 2.6vw, 32px);
  font-weight: 900;
  letter-spacing: .01em;
  text-shadow: 0 1px 0 rgba(0,0,0,.3);
}

.season-tag {
  margin-top: 2px;
  font-size: 12px;
  letter-spacing: .34em;
  text-transform: uppercase;
  color: var(--text-dim);
}

.brand {
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 0;
}
.brand > div { min-width: 0; }
#main-title {
  white-space: nowrap;
  overflow: hidden; text-overflow: ellipsis;
}

.brand-img {
  width: clamp(34px, 4.5vw, 48px);
  height: clamp(30px, 3.3vw, 44px);
  border-radius: 12px;
  object-fit: cover;
  display: inline-block;
  position: relative;
  z-index: 0;
  box-shadow:
    0 4px 14px rgba(0,0,0,.28),
    inset 0 0 0 1px rgba(255,255,255,.05);
  background: #0b1220;
  border: 1px solid rgba(100,160,255,.45);
  transition: transform .25s var(--ease), box-shadow .25s var(--ease), border-color .25s var(--ease);
}
.brand-img:hover {
  transform: translateY(-1px) scale(1.03);
  border-color: rgba(120,190,255,.8);
  box-shadow:
    0 10px 30px rgba(32,80,200,.35),
    0 0 0 6px rgba(80,160,255,.08),
    inset 0 0 0 1px rgba(255,255,255,.08);
}

/* =========================
   Page grid / cards
   ========================= */
.container {
  max-width: 1200px;
  margin: 20px auto 48px;
  padding: 0 clamp(12px,4vw,36px);
  display: grid;
  gap: 22px;
  position: relative;
  z-index: 1;
}
@media (min-width: 980px) {
  .container { grid-template-columns: 380px 1fr; }
}
@media (max-width: 979.98px) {
  .container { display: block; }
  .card { margin-bottom: 16px; }
}

/* Card */
.card {
  position: relative;
  background: var(--grad-card);
  border-radius: var(--radius);
  padding: 18px clamp(14px,3vw,26px);
  border: 1px solid var(--line);
  box-shadow: var(--shadow-1);
  overflow: clip;
  transform: translateY(8px);
  opacity: 0;
  animation: card-in .6s var(--ease-out) forwards;
}
@keyframes card-in {
  to { transform: none; opacity: 1; }
}
.section-title {
  color: var(--text-0);
  font-weight: 900;
  letter-spacing: .06em;
  text-transform: uppercase;
  font-size: 12px;
  margin-bottom: 10px;
  opacity: .9;
}

/* =========================
   Mode switch (header right)
   ========================= */
.mode-switch-wrap { display: flex; align-items: center; }
.mode-switch {
  display: inline-flex;
  background: rgba(8,20,42,.6);
  border: 1px solid rgba(120,160,255,.2);
  border-radius: 14px;
  overflow: hidden;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.04);
}
.mode-btn {
  appearance: none;
  background: transparent;
  color: var(--text-1);
  font-weight: 800;
  letter-spacing: .06em;
  font-size: 12px;
  text-transform: uppercase;
  padding: 10px 14px;
  border: none;
  cursor: pointer;
  transition: color .18s var(--ease), background .18s var(--ease), transform .18s var(--ease);
}
.mode-btn-active {
  background: linear-gradient(180deg, rgba(34,211,238,.18), rgba(32,72,180,.20));
  color: var(--text-0);
}
.mode-btn:active { transform: translateY(1px); }

/* =========================
   Chips (checkbox pills)
   ========================= */
.chips { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 10px; }

.chip {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 10px 16px 10px 44px;
  border-radius: 12px;
  background: var(--grad-chip);
  border: 1px solid var(--line-2);
  position: relative;
  cursor: pointer;
  user-select: none;
  transition: border-color .18s var(--ease), transform .18s var(--ease), box-shadow .18s var(--ease);
}
.chip:hover { border-color: rgba(120,160,255,.25); transform: translateY(-1px); }
.chip:active { transform: translateY(0); }

.chip .chip-text { color: var(--text-0); font-weight: 700; letter-spacing: .02em; }

#chips .chip input[type="checkbox"],
#showOnWheel .chip input[type="checkbox"],
.showopts .chip input[type="checkbox"] {
  appearance: none;
  position: absolute;
  left: 16px;
  width: 18px;
  height: 18px;
  border-radius: 6px;
  border: 1px solid rgba(120,150,220,.45);
  background: rgba(4,9,19,.8);
  display: grid;
  place-items: center;
  transition: .18s var(--ease);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.05);
}
#chips .chip input[type="checkbox"]::after,
#showOnWheel .chip input[type="checkbox"]::after,
.showopts .chip input[type="checkbox"]::after {
  content: "";
  width: 9px; height: 9px; border-radius: 4px;
  background: var(--accent);
  transform: scale(.2);
  opacity: 0;
  transition: .18s var(--ease);
}
#chips .chip input[type="checkbox"]:checked,
#showOnWheel .chip input[type="checkbox"]:checked,
.showopts .chip input[type="checkbox"]:checked {
  border-color: rgba(120,180,255,.7);
  background: linear-gradient(180deg, rgba(18,28,58,.9), rgba(6,12,24,.9));
}
#chips .chip input[type="checkbox"]:checked::after,
#showOnWheel .chip input[type="checkbox"]:checked::after,
.showopts .chip input[type="checkbox"]:checked::after {
  transform: scale(1);
  opacity: 1;
}

/* Quick pick buttons */
.chip-btn {
  appearance: none;
  border: 1px solid var(--line-2);
  background: var(--grad-chip);
  border-radius: 12px;
  padding: 10px 14px;
  color: var(--text-0);
  font-weight: 800;
  letter-spacing: .04em;
  text-transform: uppercase;
  font-size: 12px;
  cursor: pointer;
  transition: border-color .18s var(--ease), transform .18s var(--ease), box-shadow .18s var(--ease), background .18s var(--ease);
}
.chip-btn:hover { border-color: rgba(120,160,255,.25); transform: translateY(-1px); }
.chip-btn:active { transform: translateY(0); }
.chip-btn.ghost { background: rgba(8,18,36,.6); }
.quick-picks { display: flex; gap: 8px; margin-bottom: 10px; }
.chip-btn.active { outline: 2px solid rgba(100,168,255,.5); background: linear-gradient(180deg, rgba(40,140,255,.22), rgba(24,44,120,.2)); }

/* Show-on-wheel group */
.showopts { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px; }

/* =========================
   Buttons
   ========================= */
#spinBtn, #resetHistoryBtn {
  appearance: none;
  width: 100%;
  margin-top: 10px;
  padding: 12px 16px;
  border-radius: 12px;
  border: 1px solid var(--line);
  background: linear-gradient(180deg, rgba(0,180,216,.12), rgba(0,106,178,.18));
  color: var(--text-0);
  font-weight: 900;
  letter-spacing: .08em;
  text-transform: uppercase;
  cursor: pointer;
  transition: transform .2s var(--ease), box-shadow .2s var(--ease), border-color .2s var(--ease), opacity .2s var(--ease);
}
#spinBtn:hover { transform: translateY(-1px); border-color: rgba(100,168,255,.5); box-shadow: 0 10px 26px rgba(0,128,255,.22); }
#spinBtn:disabled { opacity: .55; cursor: default; transform: none; box-shadow: none; }
#resetHistoryBtn { background: linear-gradient(180deg, rgba(12,18,36,.8), rgba(8,14,26,.9)); }

/* History */
.history-title {
  margin-top: 14px;
  color: var(--text-0);
  font-weight: 900;
  letter-spacing: .06em;
  text-transform: uppercase;
  font-size: 12px;
}
.history {
  margin-top: 8px;
  padding: 8px;
  border: 1px dashed var(--line-2);
  border-radius: 10px;
  max-height: 220px;
  overflow: auto;
}
.history .item {
  display: grid;
  grid-template-columns: 28px 1fr;
  gap: 8px;
  align-items: center;
  padding: 6px 4px;
  border-radius: 8px;
  transition: background .18s var(--ease);
}
.history .item:hover { background: rgba(255,255,255,.04); }
.history .item img { width: 28px; height: 28px; object-fit: cover; border-radius: 6px; }

/* =========================
   Wheel + pointer
   ========================= */
.wheel-wrap {
  position: relative;
  width: 100%;
  display: grid;
  place-items: center;
  min-height: 420px;
  margin: 6px 0 4px;
}
#wheel { display: block; max-width: min(92vw, 100%); height: auto; }
#fx { position: absolute; inset: 0; pointer-events: none; }

/* Pointer (float) */
.pointer {
  position: absolute;
  top: clamp(4px, 1vw, 12px);
  border-left: 16px solid transparent;
  border-right: 16px solid transparent;
  border-top: 26px solid var(--accent-2);
  filter: drop-shadow(0 6px 10px rgba(0,0,0,.35));
  z-index: 3;
  animation: pointer-float 3.5s ease-in-out infinite;
}
@keyframes pointer-float {
  0%,100% { transform: translateY(0); }
  50%     { transform: translateY(-3px); }
}
@media (max-width: 600px) {
  .pointer {
    border-left-width: 12px;
    border-right-width: 12px;
    border-top-width: 20px;
  }
}

/* Spin FAB with animated ring
   (centered by JS with left/top; fallback keeps it centered) */
.spin-fab {
  position: absolute;
  inset: 50% auto auto 50%;
  transform: translate(-50%,-50%);
  z-index: 4;
  appearance: none;
  border: 0;
  width: clamp(76px, 10vw, 110px);
  height: clamp(76px, 10vw, 110px);
  border-radius: 999px;
  font-weight: 1000;
  letter-spacing: .12em;
  color: var(--text-0);
  background: radial-gradient(70% 70% at 50% 30%, rgba(90,160,255,.25), rgba(0,0,0,.0)),
              linear-gradient(180deg, rgba(24,58,128,.85), rgba(10,32,95,.95));
  box-shadow:
    0 16px 36px rgba(0,0,0,.4),
    inset 0 0 0 1px rgba(255,255,255,.05);
  cursor: pointer;
}
.spin-fab::before {
  content: "";
  position: absolute; inset: -8px;
  border-radius: inherit;
  box-shadow: 0 0 0 0 rgba(34,211,238,.35);
  animation: ring 2.4s ease-out infinite;
}
@keyframes ring {
  0% { box-shadow: 0 0 0 0 rgba(34,211,238,.35); }
  70% { box-shadow: 0 0 0 14px rgba(34,211,238,0); }
  100% { box-shadow: 0 0 0 0 rgba(34,211,238,0); }
}
.spin-fab:disabled { opacity: .6; filter: grayscale(.2); cursor: default; }

/* =========================
   Modal
   ========================= */
.modal-backdrop {
  position: fixed;
  inset: 0;
  display: none;
  align-items: flex-end;
  justify-content: center;
  background: rgba(3,6,12,.6);
  backdrop-filter: blur(6px);
  z-index: 40;
}
.modal {
  width: min(680px, 90vw);
  margin: 20px;
  border-radius: 14px;
  background: linear-gradient(180deg, rgba(10,18,36,.8), rgba(10,14,26,.9));
  border: 1px solid rgba(100,160,255,.25);
  box-shadow: 0 30px 60px rgba(0,0,0,.45);
  transform: translateY(20px) scale(.98);
  opacity: 0;
  transition: transform .2s var(--ease), opacity .2s var(--ease);
}
.modal.show { transform: none; opacity: 1; }

.m-head {
  font-weight: 1000;
  letter-spacing: .02em;
  color: var(--text-0);
  font-size: clamp(22px, 3vw, 32px);
  padding: 16px 22px 0;
}
.m-body { padding: 6px 22px 12px; }
.m-sub {
  color: var(--text-dim);
  font-weight: 700;
  letter-spacing: .04em;
  text-transform: uppercase;
  font-size: 12px;
}
.m-row { display: flex; align-items: center; gap: 10px; margin-top: 10px; }

.m-logo {
  display: block;
  width: clamp(72px, 10vw, 120px);
  height: clamp(72px, 10vw, 120px);
  border-radius: 12px;
  border: 1px solid rgba(120,160,255,.35);
  background: radial-gradient(60% 60% at 50% 30%, rgba(120,160,255,.1), rgba(0,0,0,.2));
  object-fit: cover;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.m-actions {
  padding: 14px 22px 20px;
  background: #0f1830;
  border-top: 1px solid #234080;
  display: flex;
  gap: 10px;
  justify-content: center;
}

/* Keep modal buttons narrow */
#backdrop .chip-btn, #backdrop button { width: auto; min-width: 160px; }

/* Reveal button styling used by JS */
.reveal-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 8px 14px;
  border-radius: 10px;
  border: 1px solid rgba(90,161,255,.6);
  background: #152036;
  color: #fff;
  font-weight: 800;
  letter-spacing: .03em;
  cursor: pointer;
  user-select: none;
  position: relative;
  z-index: 3;
  white-space: nowrap;
  margin-top: 8px;
}

/* =========================
   Player list (optional preview)
   ========================= */
.player-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 10px;
  margin: 10px 0 6px;
}
.player-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border: 1px solid var(--line-2);
  border-radius: 10px;
  background: linear-gradient(180deg, rgba(24,36,68,.5), rgba(10,14,26,.6));
  min-width: 0;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
  transition: transform .18s var(--ease), border-color .18s var(--ease);
}
.player-item:hover { transform: translateY(-1px); border-color: rgba(120,160,255,.28); }
.player-item img { flex: 0 0 auto; }

/* =========================
   Content block (SEO/FAQ)
   ========================= */
#content {
  margin-top: 6px;
  padding: 14px clamp(12px,3vw,18px) 2px;
  border: 1px solid rgba(255,255,255,.06);
  border-radius: 14px;
  background: linear-gradient(180deg, rgba(10,18,36,.5), rgba(8,14,26,.7));
}

/* Tiny TOC */
#content .toc {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin: 4px 0 14px;
}
#content .toc a {
  display: inline-block;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.08);
  color: var(--text-1);
  text-decoration: none;
  font-weight: 700;
  letter-spacing: .02em;
  transition: transform .18s var(--ease), border-color .18s var(--ease), box-shadow .18s var(--ease);
}
#content .toc a:hover {
  transform: translateY(-1px);
  border-color: var(--accent-2);
  box-shadow: 0 10px 22px rgba(34,211,238,.18);
}

/* Details containers */
#content details {
  border: 1px solid rgba(255,255,255,.07);
  background: rgba(255,255,255,.02);
  border-radius: 12px;
  margin: 12px 0;
  overflow: hidden;
}
#content details[open] {
  border-color: rgba(0,180,216,.28);
  background: linear-gradient(180deg, rgba(0,180,216,.05), rgba(255,255,255,.02));
}

/* Summary row: hide native marker and add hover/focus states */
#content summary {
  list-style: none;
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 10px;
  padding: 14px 16px;
  cursor: pointer;
  border-radius: 10px;
  transition: background .18s var(--ease), color .18s var(--ease), box-shadow .18s var(--ease);
}
#content summary::-webkit-details-marker { display: none; }
#content summary:hover { background: rgba(255,255,255,.03); }
#content summary:focus { outline: none; box-shadow: 0 0 0 2px rgba(34,211,238,.35) inset; }

/* Marker icon */
#content summary .marker {
  flex: 0 0 auto;
  width: 24px; height: 24px;
  border-radius: 6px;
  background: linear-gradient(180deg, rgba(34,211,238,.25), rgba(24,44,120,.25));
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
  position: relative;
}
#content summary .marker::before {
  content: "";
  position: absolute;
  left: 7px; top: 10px; right: 7px;
  height: 2px;
  background: rgba(230,248,255,.88);
  transition: transform .2s var(--ease);
}
#content details[open] summary .marker::before { transform: rotate(90deg); }

/* Details content */
#content .details-body {
  padding: 0 16px 14px;
  color: var(--text-1);
}

/* =========================
   Misc / helpers
   ========================= */

/* 1) Lock UI while spinning */
.ui-locked { pointer-events: none; }
.ui-locked #spinBtn,
.ui-locked #spinFab { filter: grayscale(.3) brightness(.9); }

/* 2) Hide elements with .hidden */
.hidden { display: none !important; }

/* 3) Small text helper */
.small { font-size: 12px; color: var(--text-dim); }

/* 4) Ensure images never overflow their container */
img { max-width: 100%; }

/* 5) Custom, subtle scrollbar for history list */
.history {
  scrollbar-width: thin;
  scrollbar-color: rgba(120,160,255,.35) transparent;
}
.history::-webkit-scrollbar { width: 8px; }
.history::-webkit-scrollbar-thumb {
  background: rgba(120,160,255,.28);
  border-radius: 8px;
}
.history::-webkit-scrollbar-track { background: transparent; }

/* 6) Perf-tip progress meter (set --pct: 0..1 via JS; wrap text in .meter-text) */
.perf-tip { position: relative; overflow: hidden; }
.perf-tip::before {
  content: "";
  position: absolute; inset: 0;
  transform-origin: left center;
  transform: scaleX(var(--pct, 0));
  background: linear-gradient(90deg, rgba(34,211,238,.22), rgba(100,168,255,.25));
  transition: transform .25s var(--ease);
  pointer-events: none;
}
.perf-tip .meter-text { position: relative; z-index: 1; }

/* 7) Slightly larger tap targets for chips on mobile */
@media (max-width: 560px) {
  #chips .chip,
  #showOnWheel .chip,
  .showopts .chip { padding: 12px 18px 12px 46px; }
  #chips .chip input[type="checkbox"],
  #showOnWheel .chip input[type="checkbox"],
  .showopts .chip input[type="checkbox"] { width: 20px; height: 20px; }
}

/* =========================================================
   Sidebar sticky/overflow fix (prevents left card being cut
   and overlapping when scrolling under sticky header)
   ========================================================= */
@media (min-width: 980px) {
  .container { align-items: flex-start; }

  /* Left filter card (sidebar) */
  #teamView {
    position: sticky !important;
    top: 84px; /* below sticky header; tweak if header size changes */
    align-self: start;
    max-height: calc(100vh - 96px);
    overflow: auto;                 /* internal scroll, not clipped */
    overscroll-behavior: contain;
    z-index: 5;                     /* above right card’s canvas/pointer */
  }

  /* Ensure right column can’t overlay the sticky sidebar */
  .container > .card:not(#teamView) {
    min-width: 0;
    z-index: 1;
    overflow: visible;
  }
}

/* Nicer scrollbar for the sticky sidebar */
#teamView::-webkit-scrollbar { width: 8px; }
#teamView::-webkit-scrollbar-thumb { background: rgba(120,160,255,.28); border-radius: 8px; }
#teamView::-webkit-scrollbar-track { background: transparent; }
