/* Football Spinner — full stylesheet (stable)
   - Dark theme, grid cards, chip UI, wheel, modal
   - Sticky left sidebar with INTERNAL scroll (no overlay)
   - Bottom content block styled as a card, sits beneath main grid
*/

/* =========================
   Theme / tokens
   ========================= */
:root{
  color-scheme: dark;

  /* Layout */
  --header-h:84px;                  /* keep in sync with header height */
  --gutter:22px;
  --radius:20px;

  /* Colors */
  --bg-0:#05070f; --bg-1:#08101e; --bg-2:#0e1526;
  --text:#eaf0fb; --muted:#a9b9d6;

  --accent:#64a8ff; --accent-2:#22d3ee; --accent-3:#9b6bff;

  /* Surfaces / borders / shadows */
  --grad-card:linear-gradient(180deg, rgba(18,27,48,.9), rgba(10,16,30,.86));
  --grad-chip:linear-gradient(135deg, rgba(18,28,52,.96), rgba(10,16,30,.92));
  --line:rgba(120,160,255,.18);
  --line-strong:rgba(120,160,255,.32);

  --shadow-1:0 8px 30px rgba(0,0,0,.25);
  --shadow-2:0 24px 80px rgba(18,30,52,.42);

  /* Motion */
  --ease:cubic-bezier(.2,.7,.1,1);
  --ease-out:cubic-bezier(.16,1,.3,1);
}

@media (prefers-reduced-motion:reduce){
  :root{ --ease:linear; --ease-out:linear; }
  *{ animation:none!important; transition:none!important; }
}

/* =========================
   Base / background
   ========================= */
*,
*::before,
*::after{ box-sizing:border-box; }

html, body{ height:100%; }

body{
  margin:0; min-height:100vh; color:var(--text);
  font-family:"Inter", system-ui, Segoe UI, Roboto, Arial, sans-serif;
  background:
    radial-gradient(1400px 840px at 25% -20%, rgba(90,161,255,.25) 0, transparent 48%),
    radial-gradient(1100px 880px at 92% -12%, rgba(34,211,238,.16) 0, transparent 45%),
    linear-gradient(180deg, var(--bg-0), var(--bg-1) 28%, var(--bg-1) 100%);
  background-attachment:fixed;
  overflow-x:hidden;
}
[hidden]{ display:none!important; }

/* Soft ambient glow (subtle) */
body::before{
  content:""; position:fixed; inset:-20vmax; pointer-events:none; z-index:0;
  background:
    radial-gradient(50% 50% at 50% 50%, rgba(60,120,255,.08) 0%, transparent 60%) 0 0/40vmax 40vmax no-repeat,
    radial-gradient(50% 50% at 100% 0%, rgba(34,211,238,.08) 0%, transparent 60%) 0 0/40vmax 40vmax no-repeat;
  filter:blur(40px); opacity:.8;
  animation:bg-drift 34s linear infinite;
}
@keyframes bg-drift{ 0%{transform:translate3d(0,0,0) rotate(0)} 50%{transform:translate3d(1.5%,-1.5%,0) rotate(180deg)} 100%{transform:translate3d(0,0,0) rotate(360deg)} }

/* =========================
   Header
   ========================= */
header{
  position:sticky; top:0; z-index:20;
  display:flex; align-items:center; justify-content:space-between; gap:24px;
  padding:16px clamp(16px,3vw,36px);
  background:linear-gradient(180deg, rgba(12,18,31,.78), rgba(10,16,28,.62));
  backdrop-filter:blur(14px);
  border-bottom:1px solid rgba(120,160,255,.14);
}
header h1{ margin:0; font-size:clamp(22px,2.6vw,32px); font-weight:900; letter-spacing:.01em; }
.season-tag{ margin-top:2px; font-size:12px; letter-spacing:.34em; text-transform:uppercase; color:rgba(197,212,235,.76); }
header .brand{ display:inline-flex; align-items:center; gap:12px; }
.brand-img{
  width:clamp(30px,3.3vw,44px); height:clamp(30px,3.3vw,44px);
  border-radius:12px; object-fit:cover; background:#0b1220;
  border:1px solid rgba(100,160,255,.45);
  box-shadow:0 4px 14px rgba(0,0,0,.28), inset 0 0 0 1px rgba(255,255,255,.05);
  transition:transform .25s var(--ease), box-shadow .25s var(--ease), border-color .25s var(--ease);
}
.brand-img:hover{
  transform:translateY(-1px) scale(1.03);
  border-color:rgba(120,190,255,.8);
  box-shadow:0 10px 30px rgba(32,80,200,.35), 0 0 0 6px rgba(80,160,255,.08), inset 0 0 0 1px rgba(255,255,255,.08);
}

/* =========================
   Grid / Cards
   ========================= */
.container{
  max-width:1200px;
  margin:20px auto 48px;
  padding:0 clamp(12px,4vw,36px);
  display:grid;
  grid-template-columns:380px 1fr;   /* left sidebar | right wheel */
  gap:var(--gutter);
  align-items:start;
  position:relative; z-index:1;
}
@media (max-width:979.98px){
  .container{ display:block; }
}

.card{
  background:var(--grad-card);
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:18px clamp(14px,3vw,26px);
  box-shadow:var(--shadow-1);
}

/* ===== LEFT SIDEBAR (single source of truth)
   - Sticky under header
   - Fixed viewport-height box with INTERNAL scroll
   - Always sits UNDER the wheel (z-index ladder)
============================================= */
.card.sidebar{
  position:sticky;
  top:var(--header-h);
  height:calc(100vh - var(--header-h) - 24px);
  max-height:calc(100vh - var(--header-h) - 24px);
  overflow:auto; -webkit-overflow-scrolling:touch;
  z-index:1;
}
@media (max-width:979.98px){
  .card.sidebar{
    position:static; height:auto; max-height:none; overflow:visible; z-index:auto;
  }
}

/* Right card (wheel) sits above sidebar */
.container > .card:not(.sidebar){
  position:relative; z-index:2;
}

/* Titles */
.section-title{
  font-size:12px; letter-spacing:.36em; text-transform:uppercase; color:var(--muted);
  margin:0 0 10px;
}

/* =========================
   Quick picks / Buttons / Chips
   ========================= */
.quick-picks{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom:10px; }

button, .chip-btn{
  width:100%; margin-top:6px; padding:14px 16px;
  border-radius:14px; border:1px solid var(--line);
  background:linear-gradient(180deg, rgba(22,34,64,.96), rgba(12,18,34,.92));
  color:#f4f7ff; font-weight:900; letter-spacing:.12em; text-transform:uppercase;
  cursor:pointer; position:relative; overflow:hidden;
  transition:transform .15s var(--ease), border-color .15s var(--ease), box-shadow .2s var(--ease), background .2s var(--ease);
}
button:hover, .chip-btn:hover{ transform:translateY(-1px); border-color:var(--accent-2); box-shadow:0 10px 30px rgba(34,211,238,.16); }
button:active{ transform:translateY(0); }
button:disabled{ opacity:.6; cursor:wait; }
button::after, .chip-btn::after{
  content:""; position:absolute; inset:0;
  background:linear-gradient(120deg, rgba(255,255,255,.08), transparent 30% 70%, rgba(255,255,255,.08));
  transform:translateX(-100%); transition:transform .7s var(--ease-out); pointer-events:none;
}
button:hover::after, .chip-btn:hover::after{ transform:translateX(100%); }
.chip-btn.ghost{ background:linear-gradient(180deg, rgba(18,22,36,.86), rgba(10,14,26,.82)); border-style:dashed; }

#chips .chips, #showOnWheel, .showopts{ display:flex; flex-wrap:wrap; gap:10px; margin:6px 0 14px; }

#chips .chip, #showOnWheel .chip, .showopts .chip{
  position:relative; display:inline-flex; align-items:center; gap:10px;
  padding:10px 16px 10px 46px; border-radius:999px;
  border:1px solid var(--line); background:var(--grad-chip);
  font-size:13px; font-weight:700; color:var(--text); cursor:pointer;
  transition:transform .16s var(--ease), border-color .16s var(--ease), box-shadow .2s var(--ease);
  max-width:100%;
}
#chips .chip:hover, #showOnWheel .chip:hover, .showopts .chip:hover{ border-color:var(--line-strong); transform:translateY(-1px) scale(1.02); }

#chips .chip input[type="checkbox"],
#showOnWheel .chip input[type="checkbox"],
.showopts .chip input[type="checkbox"]{
  appearance:none; position:absolute; left:16px; width:18px; height:18px;
  border-radius:6px; border:1px solid rgba(120,150,220,.45); background:rgba(4,9,19,.8);
  display:grid; place-items:center; transition:.18s var(--ease); box-shadow:inset 0 1px 0 rgba(255,255,255,.05);
}
#chips .chip input[type="checkbox"]::after,
#showOnWheel .chip input[type="checkbox"]::after,
.showopts .chip input[type="checkbox"]::after{
  content:""; width:9px; height:9px; border-radius:4px; background:var(--accent);
  transform:scale(.2); opacity:0; transition:.18s var(--ease);
}
#chips .chip input[type="checkbox"]:checked,
#showOnWheel .chip input[type="checkbox"]:checked,
.showopts .chip input[type="checkbox"]:checked{
  border-color:var(--accent); background:rgba(90,161,255,.18); box-shadow:0 0 0 2px rgba(90,161,255,.18) inset;
}
#chips .chip input[type="checkbox"]:checked::after,
#showOnWheel .chip input[type="checkbox"]:checked::after,
.showopts .chip input[type="checkbox"]:checked::after{
  transform:scale(1); opacity:1;
}

/* Hide stray blank chip in TEAM mode */
.showopts .chip:has(.chip-text:empty){ display:none!important; }

#chips .chip .chip-text, #showOnWheel .chip .chip-text, .showopts .chip .chip-text{
  display:inline-block; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:28ch;
}
@media (max-width:560px){
  #chips .chip, #showOnWheel .chip, .showopts .chip{ padding:10px 18px 10px 46px; }
  #chips .chip .chip-text, #showOnWheel .chip .chip-text, .showopts .chip .chip-text{ max-width:24ch; }
}

/* =========================
   History
   ========================= */
.history-title{ margin:18px 0 10px; color:var(--muted); font-size:12px; letter-spacing:.34em; text-transform:uppercase; }
.history{ max-height:260px; overflow:auto; display:grid; gap:10px; }
.item{
  display:flex; gap:10px; align-items:center; padding:10px 12px;
  border-radius:12px; background:rgba(17,28,48,.85); border:1px solid rgba(90,161,255,.12);
  transition:transform .16s var(--ease);
}
.item:hover{ transform:translateY(-1px); }
.item img{
  width:38px; height:38px; border-radius:12px; object-fit:contain; background:#0b1220;
  border:1px solid rgba(90,161,255,.22); box-shadow:0 2px 8px rgba(16,24,48,.28);
}

/* =========================
   Selection meter
   ========================= */
.perf-tip{
  position:relative; font-size:12px; color:#bcd4ff;
  background:rgba(40,60,100,.28); border:1px solid rgba(120,160,255,.25);
  border-radius:10px; padding:6px 10px; margin:6px 0 10px; text-align:center; overflow:hidden;
}
.perf-tip::before{
  content:""; position:absolute; inset:0; transform-origin:left center; transform:scaleX(var(--pct,0));
  background:linear-gradient(90deg, rgba(34,211,238,.22), rgba(100,168,255,.25));
  transition:transform .25s var(--ease); pointer-events:none;
}
.perf-tip .meter-text{ position:relative; z-index:1; }

/* =========================
   Wheel / Pointer / Spin FAB
   ========================= */
.wheel-wrap{
  position:relative; display:flex; justify-content:center; align-items:center;
  padding:clamp(36px,5vw,64px) clamp(10px,2.5vw,18px) clamp(10px,2.5vw,18px);
  min-height:640px; isolation:isolate;   /* own stacking context for safety */
}
canvas#wheel{
  width:100%; max-width:820px; height:auto; border-radius:50%;
  filter:drop-shadow(0 30px 60px rgba(0,0,0,.55));
  background:transparent;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
#fx{ position:absolute; inset:0; pointer-events:none; }

.pointer{
  position:absolute; top:clamp(4px,1vw,12px); z-index:3;
  border-left:16px solid transparent; border-right:16px solid transparent; border-top:26px solid var(--accent-2);
  filter:drop-shadow(0 6px 10px rgba(0,0,0,.35));
  animation:pointer-float 3.5s ease-in-out infinite;
}
@keyframes pointer-float{ 0%,100%{ transform:translateY(0); } 50%{ transform:translateY(-3px); } }
@media (max-width:600px){
  .pointer{ border-left-width:12px; border-right-width:12px; border-top-width:20px; }
}

/* Spin button */
.spin-fab{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); z-index:5;
  width:clamp(88px,14vw,132px); height:clamp(88px,14vw,132px); border-radius:999px;
  display:inline-flex; align-items:center; justify-content:center;
  border:2px solid rgba(120,200,255,.55);
  background:radial-gradient(120% 120% at 30% 20%, #2b3d72 0%, #132447 55%, #0b1530 100%);
  color:#f4f7ff; font-weight:900; letter-spacing:.16em; text-transform:uppercase;
  box-shadow:0 10px 30px rgba(0,0,0,.45), inset 0 0 30px rgba(90,161,255,.15);
}

/* =========================
   Modal
   ========================= */
#backdrop{
  position:fixed; inset:0; z-index:1000;
  background:rgba(4,10,24,.82); backdrop-filter:blur(12px);
  display:none; align-items:center; justify-content:center; padding:24px;
}
#modal{
  width:min(95vw,420px); max-width:420px;
  background:linear-gradient(180deg, rgba(16,24,42,.96), rgba(13,20,38,.92));
  border:1px solid #4f82ff; border-radius:18px; box-shadow:var(--shadow-2);
  overflow:hidden; display:flex; flex-direction:column;
}
#mHead{ padding:22px 26px 0; font-weight:900; font-size:24px; text-align:center; }
#mSub{ font-size:14px; color:#a3b8e7; margin:6px 0 2px; text-align:center; }
.m-body{ padding:10px 22px 14px; display:flex; flex-direction:column; align-items:center; gap:10px; }
#mLogo{
  width:110px; height:110px; max-width:60vw; object-fit:contain; display:block; margin:10px auto 6px;
  background:#0b1220; border:1px solid #5aa1ff; border-radius:16px; box-shadow:0 2px 10px rgba(16,24,48,.45);
}
.m-row{ width:100%; display:flex; align-items:center; justify-content:center; gap:10px; flex-wrap:wrap; margin:6px 0; }
.value-pill{
  display:inline-block; min-width:180px; max-width:260px; text-align:center;
  padding:8px 12px; border-radius:10px; background:rgba(17,28,48,.85);
  border:1px solid rgba(90,161,255,.16); color:#d7e8ff; font-weight:800;
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}
.m-actions{ padding:14px 22px 20px; background:#0f1830; border-top:1px solid #234080; display:flex; justify-content:center; gap:10px; }

/* =========================
   Content / FAQ (card look, BELOW grid)
   ========================= */
#content{
  grid-column:1 / -1;
  position:relative;
  z-index:0;                    /* IMPORTANT: below wheel & sidebar */
  background:var(--grad-card);
  border:1px solid var(--line);
  border-radius:var(--radius);
  box-shadow:var(--shadow-1);
  padding:18px clamp(14px,3vw,26px);
  margin-top:24px;
}
#content [id]{ scroll-margin-top:calc(var(--header-h) + 12px); }
#content h2{ margin:0 0 10px; font-size:clamp(24px,2.4vw,30px); font-weight:800; }
#content h3{ font-size:clamp(18px,2vw,22px); font-weight:800; margin:0; }
#content p, #content li, #content dd{ font-size:clamp(15px,1.6vw,17px); line-height:1.7; color:#e8eefb; }
#content dt{ font-size:clamp(13px,1.45vw,14px); color:var(--muted); font-weight:800; margin-top:12px; }
#content .toc{ display:flex; flex-wrap:wrap; gap:10px 12px; margin:8px 0 18px; padding-top:6px; }
#content .toc a{
  display:inline-flex; align-items:center; gap:6px; padding:8px 12px; border-radius:999px;
  font-weight:700; font-size:clamp(13px,1.4vw,14px); text-decoration:none; color:#e9f5ff;
  background:linear-gradient(180deg, rgba(24,40,72,.9), rgba(14,24,48,.88)); border:1px solid var(--line);
  transition:transform .15s var(--ease), border-color .15s var(--ease), box-shadow .2s var(--ease);
}
#content .toc a:hover{ transform:translateY(-1px); border-color:var(--accent-2); box-shadow:0 10px 22px rgba(34,211,238,.18); }
#content details{
  border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.02);
  border-radius:14px; margin:12px 0; overflow:hidden;
}
#content details[open]{ border-color:rgba(100,168,255,.28); background:linear-gradient(180deg, rgba(100,168,255,.06), rgba(255,255,255,.02)); }
#content summary{
  list-style:none; display:grid; grid-template-columns:1fr auto; align-items:center; gap:12px;
  padding:14px 16px; cursor:pointer; transition:background .18s var(--ease), color .18s var(--ease);
}
#content summary::-webkit-details-marker{ display:none; }
#content summary::after{ content:"⌄"; font-weight:900; letter-spacing:.06em; color:#bcd4ff; transform:rotate(0); transition:transform .2s var(--ease); }
#content details[open] summary::after{ transform:rotate(-180deg); }
#content details>.panel{
  padding:0 16px 0; border-top:1px solid rgba(255,255,255,.1);
  max-height:0; overflow:hidden; opacity:0; transition:max-height .3s var(--ease), opacity .22s var(--ease);
}
#content details[open]>.panel{ padding:12px 16px 16px; max-height:1000px; opacity:1; }

/* =========================
   Accessibility
   ========================= */
button:focus-visible,
.chip-btn:focus-visible,
#chips .chip input[type="checkbox"]:focus-visible,
#showOnWheel .chip input[type="checkbox"]:focus-visible,
.showopts .chip input[type="checkbox"]:focus-visible{
  outline:2px solid var(--accent-2); outline-offset:3px; border-radius:12px;
}
