<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Required meta -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Primary SEO -->
  <title>Football Spinner – Random Football Teams & Premier League Player Generator</title>
  <meta name="description" content="Spin random football teams from 25 European leagues or generate a Premier League player instantly. Free, fast and no login. Perfect for quizzes, predictions, challenges and watch parties." />
  <meta name="keywords" content="football spinner, football club spin wheel, random football team generator, random player generator, premier league players, european leagues, trivia, wheel, football quiz, spin the wheel football clubs" />
  <link rel="canonical" href="https://footballspinner.com/" />
  <meta name="robots" content="index,follow" />
  <meta name="theme-color" content="#0b1530" />

  <!-- Open Graph -->
  <meta property="og:title" content="Football Spinner – Random Football Teams & Premier League Player Generator" />
  <meta property="og:description" content="Spin random football teams from 25 European leagues or generate a Premier League player instantly. Free, fast and no login. Perfect for quizzes, predictions, challenges and watch parties." />
  <meta property="og:url" content="https://footballspinner.com/" />
  <meta property="og:site_name" content="Football Spinner" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://footballspinner.com/app-og.png" />
  <meta property="og:image:alt" content="Football Spinner app preview" />
  <meta property="og:locale" content="en_GB" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Football Spinner – Random Football Teams & Premier League Player Generator" />
  <meta name="twitter:description" content="Spin random football teams from 25 European leagues or generate a Premier League player instantly. Free, fast and no login. Perfect for quizzes, predictions, challenges and watch parties." />
  <meta name="twitter:image" content="https://footballspinner.com/app-og.png" />

  <!-- Preconnects -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin />

  <!-- Fonts (non-blocking load) -->
  <link
    rel="preload"
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap"
    as="style"
    onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap">
  </noscript>

  <!-- Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="app-logo.png?v=1" />
  <link rel="icon" type="image/png" sizes="192x192" href="app-logo.png?v=1" />
  <link rel="apple-touch-icon" href="app-logo.png?v=1" />
  <link rel="shortcut icon" href="app-logo.png?v=1" />

  <!-- Styles -->
  <link rel="stylesheet" href="style.css?v=2" />

  <!-- Google Analytics 4 -->
  <!-- Measurement ID: G-RK8RD59N8G -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-RK8RD59N8G"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-RK8RD59N8G');
  </script>

  <!-- Small helper for affiliate tracking -->
  <script>
    function trackAffiliate(partner) {
      try {
        if (typeof gtag === 'function') {
          gtag('event', 'affiliate_click', {
            event_category: 'affiliate',
            event_label: partner
          });
        } else if (window.dataLayer) {
          window.dataLayer.push({
            event: 'affiliate_click',
            partner: partner
          });
        }
      } catch (e) {}
    }
  </script>

  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;
    j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
    f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KS5K7Z4T');
  </script>

  <!-- AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7898957613682010" crossorigin="anonymous"></script>

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebSite",
    "name":"Football Spinner",
    "url":"https://footballspinner.com/",
    "description":"Spin random football teams from 25 European leagues or generate a Premier League player instantly. Free, fast and no login.",
    "inLanguage":"en",
    "isFamilyFriendly": true,
    "publisher": {
      "@type": "Organization",
      "name": "Football Spinner",
      "url": "https://footballspinner.com/",
      "logo": {
        "@type": "ImageObject",
        "url": "https://footballspinner.com/app-logo.png",
        "width": 512,
        "height": 512
      }
    },
    "potentialAction": {
      "@type":"SearchAction",
      "target":"https://footballspinner.com/?q={query}",
      "query-input":"required name=query"
    }
  }
  </script>

  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebPage",
    "name":"Football Spinner",
    "url":"https://footballspinner.com/",
    "description":"Random football team and Premier League player spinner. No login, free to use.",
    "primaryImageOfPage": {
      "@type":"ImageObject",
      "url":"https://footballspinner.com/app-og.png",
      "width":1200,
      "height":630
    },
    "breadcrumb": {
      "@type":"BreadcrumbList",
      "itemListElement":[
        {"@type":"ListItem","position":1,"name":"Home","item":"https://footballspinner.com/"}
      ]
    }
  }
  </script>

  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"Football Spinner",
    "url":"https://footballspinner.com/",
    "applicationCategory":"SportsApplication",
    "operatingSystem":"Web",
    "image":"https://footballspinner.com/app-og.png",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},
    "featureList":[
      "Random team generator (25 European leagues)",
      "Random Premier League player generator",
      "Customizable wheel display",
      "No login required"
    ]
  }
  </script>
</head>

<body>
  <!-- GTM (noscript) -->
  <noscript>
    <iframe
      src="https://www.googletagmanager.com/ns.html?id=GTM-KS5K7Z4T"
      height="0"
      width="0"
      style="display:none;visibility:hidden"></iframe>
  </noscript>

  <header>
    <div class="brand">
      <img
        src="app-logo.png?v=1"
        alt="Football Spinner logo"
        class="brand-img"
        decoding="async"
        width="128"
        height="128" />
      <div>
        <h1 id="main-title">Football Spinner</h1>
        <div class="season-tag">
          Spin the wheel to pick a random football club or Premier League player.
        </div>
      </div>
    </div>

    <div class="header-right">
      <div class="mode-switch-wrap">
        <div class="mode-switch" role="tablist" aria-label="View mode">
          <button
            id="modeTeam"
            role="tab"
            aria-selected="true"
            class="mode-btn mode-btn-active"
            title="Spin among football clubs">TEAM</button>
          <button
            id="modePlayer"
            role="tab"
            aria-selected="false"
            class="mode-btn"
            title="Spin among players">PLAYER</button>
        </div>
        <span
          id="modeNote"
          class="small"
          style="display:none;opacity:.9;margin-left:8px;">Players: Premier League only</span>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- LEFT: filters / history / partners -->
    <section class="card sidebar" aria-labelledby="filter-title" id="teamView">
      <div class="section-title" id="filter-title">Select Leagues</div>

      <div class="quick-picks" role="group" aria-label="Quick selections">
        <button id="qpAll"  class="chip-btn" type="button" title="Select all leagues">All Leagues</button>
        <button id="qpNone" class="chip-btn" type="button" title="Deselect all">Clear</button>
        <button id="qpTop5" class="chip-btn" type="button" title="Select only the top leagues">Top 5 Leagues</button>
      </div>

      <div id="chips">
        <div id="chipsTop" class="chips"></div>
        <button
          id="toggleMore"
          class="chip-btn ghost"
          type="button"
          aria-expanded="false"
          aria-controls="chipsMore">
          Show more leagues
        </button>
        <div id="chipsMore" class="chips" hidden></div>
      </div>

      <button id="spinBtn" type="button" title="Click to spin the wheel">Spin Wheel</button>

      <div class="history-title">History</div>
      <div class="history" id="history">
        <div class="item">
          <span id="historyEmpty" class="current-name">
            Your journey starts with a spin – try your luck!
          </span>
        </div>
      </div>
      <button
        id="resetHistoryBtn"
        type="button"
        style="margin-top:12px"
        title="Clear all previous results">
        Clear History
      </button>

      <!-- Compact partner offers -->
      <div class="partner-stack" aria-label="Partner offers">
        <div class="partner-stack-title">PARTNER OFFERS</div>

        <!-- N1Bet -->
        <article class="partner-mini" id="partner-n1bet" data-partner="n1bet">
          <div class="partner-mini-main">
            <div class="partner-mini-eyebrow">Partner · N1BET Sports</div>
            <div class="partner-mini-title">Up to €60 Free Football Bets</div>
            <div class="partner-mini-body">
              Deposit €20+ • Get 4 free football bets • 18+ • New players • T&amp;Cs apply
            </div>
          </div>
          <div class="partner-mini-cta">
            <a
              class="partner-mini-btn"
              href="https://n1bet.live?ref_code=qevuxXfOKQ"
              target="_blank"
              rel="noopener noreferrer nofollow"
              onclick="trackAffiliate('n1bet')">
              CLAIM N1BET BONUS
            </a>
            <button
              class="partner-mini-toggle"
              type="button"
              aria-label="Hide N1Bet offer">
              <span class="partner-mini-toggle-icon">▾</span>
            </button>
          </div>
        </article>

        <!-- BC.GAME -->
        <article class="partner-mini" id="partner-bcgame" data-partner="bcgame">
          <div class="partner-mini-main">
            <div class="partner-mini-eyebrow">Partner · BC.GAME Sports</div>
            <div class="partner-mini-title">80% Crypto Bonus + 5 Free Bets</div>
            <div class="partner-mini-body">
              Start from $5 • 80% football boost • 5 free bets • 18+ • New players • T&amp;Cs apply
            </div>
          </div>
          <div class="partner-mini-cta">
            <a
              class="partner-mini-btn"
              href="https://bc.game/i-34qxctc8x-n/"
              target="_blank"
              rel="noopener noreferrer nofollow"
              onclick="trackAffiliate('bcgame')">
              GET CRYPTO BONUS
            </a>
            <button
              class="partner-mini-toggle"
              type="button"
              aria-label="Hide BC.GAME offer">
              <span class="partner-mini-toggle-icon">▾</span>
            </button>
          </div>
        </article>
      </div>
    </section>

    <!-- RIGHT: wheel -->
    <section class="card" aria-labelledby="wheel-title">
      <div class="section-title" id="wheel-title">Club Wheel</div>

      <div class="wheel-subheader">
        <div
          id="perfTip"
          class="perf-tip"
          aria-live="polite"
          data-clubs-text="teams ready to spin"
          data-players-text="players loaded">
          <span class="meter-text">0 teams ready to spin</span>
        </div>

        <div class="section-title" style="margin-top:8px">Show on Wheel</div>
        <div class="showopts" id="showOnWheel" role="group" aria-label="Wheel display options">
          <label class="chip" title="Display club logos or player images on the wheel">
            <input type="checkbox" id="optA" checked aria-label="Logo / Image" />
            <span id="lblA" class="chip-text">Logo</span>
          </label>
          <label class="chip" title="Show team or player names">
            <input type="checkbox" id="optB" checked aria-label="Name" />
            <span id="lblB" class="chip-text">Name</span>
          </label>
          <label class="chip" title="Team mode: Stadium · Player mode: Jersey number">
            <input type="checkbox" id="optC" aria-label="Stadium / Jersey" />
            <span id="lblC" class="chip-text">Stadium</span>
          </label>
          <label class="chip" title="Team mode: League · Player mode: Nationality">
            <input type="checkbox" id="optD" aria-label="League / Nationality" />
            <span id="lblD" class="chip-text">League</span>
          </label>
          <label class="chip" title="Extra label in player modal (e.g. club)">
            <input type="checkbox" id="optE" aria-label="Extra label" />
            <span id="lblE" class="chip-text">Extra</span>
          </label>
        </div>
      </div>

      <div class="wheel-wrap">
        <div class="pointer" aria-hidden="true"></div>
        <button
          id="spinFab"
          class="spin-fab"
          type="button"
          aria-label="Spin the wheel"
          title="Click to spin the wheel!">
          SPIN!
        </button>
        <canvas id="wheel" width="640" height="640" aria-label="Wheel"></canvas>
        <canvas id="fx"    width="640" height="640" aria-hidden="true"></canvas>
      </div>
    </section>

    <!-- PLAYER VIEW -->
    <section id="playerView" class="card player-only hidden" aria-labelledby="player-title">
      <div class="section-title" id="player-title">Players</div>
      <div class="player-controls">
        <p class="small">
          Switch to PLAYER mode to spin players instead of teams. Images are loaded from /players/players.json.
        </p>
      </div>
      <div id="playerList" class="player-list" aria-live="polite"></div>

      <div class="history-title">Player history</div>
      <div class="history" id="historyPlayers"></div>
    </section>

    <!-- Full-width accordion / FAQ / use cases -->
    <section class="card" style="grid-column:1 / -1; margin-top:28px;">
      <div class="accordion" id="infoAccordion" role="region" aria-labelledby="details-title">
        <div class="section-title" id="details-title">About Football Spinner</div>

        <!-- FAQ 1 -->
        <div class="ac-panel" id="faq-what" role="region" aria-labelledby="faq-what-summary">
          <div class="ac-summary" id="faq-what-summary" tabindex="0" role="button" aria-expanded="false">
            <div class="ac-title">What does Football Spinner do?</div>
            <span class="ac-chevron"><svg viewBox="0 0 24 24"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" fill="none"/></svg></span>
          </div>
          <div class="ac-body">
            <h2>What does Football Spinner do?</h2>
            <p>
              Football Spinner is a free web app that lets you <strong>spin a football club wheel</strong> or
              generate a random <strong>Premier League player</strong>. It’s perfect for quizzes, content creation,
              prediction games, TikTok challenges and fans who just can’t decide which team to support tonight.
            </p>
          </div>
        </div>

        <!-- FAQ 2 -->
        <div class="ac-panel" id="faq-random" role="region" aria-labelledby="faq-random-summary">
          <div class="ac-summary" id="faq-random-summary" tabindex="0" role="button" aria-expanded="false">
            <div class="ac-title">How does the random selection work?</div>
            <span class="ac-chevron"><svg viewBox="0 0 24 24"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" fill="none"/></svg></span>
          </div>
          <div class="ac-body">
            <h2>How does the random selection work?</h2>
            <p>
              Each spin uses a pseudo-random algorithm so every team (or player) currently on the wheel
              has an equal chance of being selected. Your league filters and mode (TEAM / PLAYER) determine
              which items can appear.
            </p>
            <p>
              Once the wheel stops, the selected club or player is shown in a modal with extra details such as
              league and stadium (for clubs) or club and nationality (for players, where available).
            </p>
          </div>
        </div>

        <!-- FAQ 3 -->
        <div class="ac-panel" id="faq-leagues" role="region" aria-labelledby="faq-leagues-summary">
          <div class="ac-summary" id="faq-leagues-summary" tabindex="0" role="button" aria-expanded="false">
            <div class="ac-title">Which leagues and players are supported?</div>
            <span class="ac-chevron"><svg viewBox="0 0 24 24"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" fill="none"/></svg></span>
          </div>
          <div class="ac-body">
            <h2>Which leagues and players are supported?</h2>
            <p>
              The TEAM wheel includes clubs from <strong>25 European leagues</strong>, including:
            </p>
            <ul>
              <li>Premier League</li>
              <li>La Liga</li>
              <li>Serie A</li>
              <li>Bundesliga</li>
              <li>Ligue 1</li>
              <li>and many more national top leagues.</li>
            </ul>
            <p>
              The PLAYER wheel focuses on <strong>current Premier League players</strong> with images and basic details.
              Over time, more leagues and player packs can be added.
            </p>
          </div>
        </div>

        <!-- FAQ 4 -->
        <div class="ac-panel" id="faq-free" role="region" aria-labelledby="faq-free-summary">
          <div class="ac-summary" id="faq-free-summary" tabindex="0" role="button" aria-expanded="false">
            <div class="ac-title">Is Football Spinner completely free?</div>
            <span class="ac-chevron"><svg viewBox="0 0 24 24"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" fill="none"/></svg></span>
          </div>
          <div class="ac-body">
            <h2>Is Football Spinner completely free?</h2>
            <p>
              Yes. Football Spinner is 100% free to use.  
              There is <strong>no login, no registration and no paywall</strong>.
              Basic usage data is collected only in aggregate via analytics to understand how the app is used.
            </p>
          </div>
        </div>

        <!-- FAQ 5 -->
        <div class="ac-panel" id="faq-ideas" role="region" aria-labelledby="faq-ideas-summary">
          <div class="ac-summary" id="faq-ideas-summary" tabindex="0" role="button" aria-expanded="false">
            <div class="ac-title">What can I use Football Spinner for?</div>
            <span class="ac-chevron"><svg viewBox="0 0 24 24"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" fill="none"/></svg></span>
          </div>
          <div class="ac-body">
            <h2>What can I use Football Spinner for?</h2>
            <p>Popular ways people use Football Spinner include:</p>
            <ul>
              <li>Football quizzes and pub trivia nights</li>
              <li>TikTok, Reels and YouTube Shorts ideas</li>
              <li>Prediction games and friendly challenges with friends</li>
              <li>Classroom activities around geography or football culture</li>
              <li>Letting the wheel decide a random team to support or follow</li>
            </ul>
          </div>
        </div>

        <!-- FAQ 6 -->
        <div class="ac-panel" id="faq-mobile" role="region" aria-labelledby="faq-mobile-summary">
          <div class="ac-summary" id="faq-mobile-summary" tabindex="0" role="button" aria-expanded="false">
            <div class="ac-title">Does Football Spinner work on mobile?</div>
            <span class="ac-chevron"><svg viewBox="0 0 24 24"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" fill="none"/></svg></span>
          </div>
          <div class="ac-body">
            <h2>Does Football Spinner work on mobile?</h2>
            <p>
              Yes – the app is fully optimised for phones, tablets and desktop.
              The wheel automatically resizes to your screen, so you can spin teams and players smoothly anywhere.
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal -->
  <div id="backdrop" class="modal-backdrop" style="display:none">
    <div id="modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="mHead" aria-describedby="mSub">
      <div id="mHead">Result</div>
      <div id="mSub" class="small" aria-live="polite">Click below to reveal details</div>

      <div class="m-body">
        <img id="mLogo" class="m-logo" alt="" loading="lazy" width="256" height="256" />

        <div class="m-row" id="rowStadium">
          <div class="label">Stadium</div>
          <span id="mStadium" class="value-pill"></span>
        </div>

        <div class="m-row" id="rowClub" style="display:none">
          <div class="label">Team</div>
          <span id="mClub" class="value-pill"></span>
        </div>

        <div class="m-row" id="rowJersey" style="display:none">
          <div class="label">Jersey</div>
          <span id="mJersey" class="value-pill"></span>
        </div>

        <div class="m-row" id="rowNat" style="display:none">
          <div class="label">Nationality</div>
          <span id="mNat" class="value-pill"></span>
        </div>
      </div>

      <div class="m-actions">
        <button id="mClose" class="chip-btn" type="button" title="Close this window">
          Close Window
        </button>
      </div>
    </div>
  </div>

  <!-- Copyright footer -->
  <footer class="site-footer">
    <div class="footer-inner">
      © 2025 Football Spinner. All rights reserved.
    </div>
  </footer>

  <!-- App -->
  <script src="app.js" defer></script>

  <!-- Mode text + accordion + partner helpers -->
  <script>
    (function(){
      function applyModeTexts(mode){
        const titleRight = document.getElementById('wheel-title');
        const perf = document.getElementById('perfTip');
        const meterText = perf?.querySelector('.meter-text');
        const filterTitle = document.getElementById('filter-title');
        const qpTop5 = document.getElementById('qpTop5');
        const modeNote = document.getElementById('modeNote');

        if(mode === 'player'){
          if (titleRight) titleRight.textContent = 'Player Wheel';
          if (meterText && perf?.dataset.playersText){
            const num = (meterText.textContent.match(/\d+/)||['0'])[0];
            meterText.textContent = `${num} ${perf.dataset.playersText}`;
          }
          if (filterTitle) filterTitle.textContent = 'Select Teams';
          if (qpTop5){
            qpTop5.textContent = 'Top 6 PL Teams';
            qpTop5.title = 'Select the Big Six from the Premier League';
          }
          if (modeNote){
            modeNote.style.display = 'inline';
            modeNote.textContent = 'Players: Premier League only';
          }
        } else {
          if (titleRight) titleRight.textContent = 'Club Wheel';
          if (meterText && perf?.dataset.clubsText){
            const num = (meterText.textContent.match(/\d+/)||['0'])[0];
            meterText.textContent = `${num} ${perf.dataset.clubsText}`;
          }
          if (filterTitle) filterTitle.textContent = 'Select Leagues';
          if (qpTop5){
            qpTop5.textContent = 'Top 5 Leagues';
            qpTop5.title = 'Select only the top 5 leagues';
          }
          if (modeNote){ modeNote.style.display = 'none'; }
        }
      }

      function setTabSelection(mode){
        const teamBtn = document.getElementById('modeTeam');
        const playerBtn = document.getElementById('modePlayer');
        const teamActive = mode !== 'player';
        teamBtn?.setAttribute('aria-selected', String(teamActive));
        playerBtn?.setAttribute('aria-selected', String(!teamActive));
        teamBtn?.classList.toggle('mode-btn-active', teamActive);
        playerBtn?.classList.toggle('mode-btn-active', !teamActive);
      }

      const histEmpty = document.getElementById('historyEmpty');
      if (histEmpty){
        histEmpty.textContent = 'Your journey starts with a spin – try your luck!';
      }

      const initial = (localStorage.getItem('fsMode') === 'player') ? 'player' : 'team';
      applyModeTexts(initial);
      setTabSelection(initial);

      document.getElementById('modeTeam')?.addEventListener('click', () => {
        localStorage.setItem('fsMode', 'team');
        applyModeTexts('team');
        setTabSelection('team');
      });
      document.getElementById('modePlayer')?.addEventListener('click', () => {
        localStorage.setItem('fsMode', 'player');
        applyModeTexts('player');
        setTabSelection('player');
      });

      // Accordion behaviour
      const accordion = document.getElementById('infoAccordion');
      if (accordion){
        const panels = Array.from(accordion.querySelectorAll('.ac-panel'));
        panels.forEach(panel=>{
          const summary = panel.querySelector('.ac-summary');
          const body = panel.querySelector('.ac-body');

          const setOpen = (open) => {
            panel.toggleAttribute('open', !!open);
            summary.setAttribute('aria-expanded', !!open);
            if (open) { body.style.maxHeight = body.scrollHeight + 40 + 'px'; }
            else { body.style.maxHeight = null; }
          };

          summary.addEventListener('click', ()=>{
            const willOpen = !panel.hasAttribute('open');
            panels.forEach(p=>{
              if (p!==panel){
                p.removeAttribute('open');
                p.querySelector('.ac-summary').setAttribute('aria-expanded','false');
                p.querySelector('.ac-body').style.maxHeight=null;
              }
            });
            setOpen(willOpen);
          });

          summary.addEventListener('keydown', (e)=>{
            if (e.key==='Enter' || e.key===' '){
              e.preventDefault();
              summary.click();
            }
            if (e.key==='ArrowDown'){
              e.preventDefault();
              (panels[panels.indexOf(panel)+1]||panels[0]).querySelector('.ac-summary').focus();
            }
            if (e.key==='ArrowUp'){
              e.preventDefault();
              (panels[panels.indexOf(panel)-1]||panels[panels.length-1]).querySelector('.ac-summary').focus();
            }
          });

          panel.removeAttribute('open');
          summary.setAttribute('aria-expanded','false');
        });
      }

      // Partner tiles collapse / expand with persistence
      const cards = document.querySelectorAll('.partner-mini');
      cards.forEach(card=>{
        const id = card.id || card.getAttribute('data-partner') || '';
        if (!id) return;
        const key = 'fsPartnerCollapsed_' + id;
        const toggle = card.querySelector('.partner-mini-toggle');
        const icon = toggle?.querySelector('.partner-mini-toggle-icon');

        if (!toggle) return;

        let collapsed = false;
        try { collapsed = localStorage.getItem(key) === '1'; } catch(e){}

        function applyState() {
          card.setAttribute('data-collapsed', collapsed ? '1' : '0');
          if (icon) icon.textContent = collapsed ? '▴' : '▾';
          toggle.setAttribute(
            'aria-label',
            (collapsed ? 'Show ' : 'Hide ') +
              (id.includes('n1bet') ? 'N1Bet offer' : 'BC.GAME offer')
          );
        }

        applyState();

        toggle.addEventListener('click', function(){
          collapsed = !collapsed;
          applyState();
          try { localStorage.setItem(key, collapsed ? '1' : '0'); } catch(e){}
        });
      });
    })();
  </script>
</body>
</html>
